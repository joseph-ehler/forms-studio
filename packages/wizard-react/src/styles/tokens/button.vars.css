/**
 * Button Tokens - Flat Design System
 * 
 * Philosophy: FLAT FIRST
 * - No shadows by default
 * - No transform/lift effects
 * - Semantic color tokens (not brightness filters!)
 * - Clear visual states via color changes
 * - 100% theme-aware
 */

@layer tokens {
  :root {
    /* ==========================================
       BUTTON SIZING
       ========================================== */
    
    /* Mobile-first (touch-friendly) - 4px system */
    --ds-button-height-sm: 2.5rem;   /* 40px = 10 * 4px - mobile stays touch-friendly */
    --ds-button-height-md: 3rem;     /* 48px = 12 * 4px */
    --ds-button-height-lg: 3.5rem;   /* 56px = 14 * 4px */
    --ds-button-height-xl: 4rem;     /* 64px = 16 * 4px */
    
    /* Desktop (Strategic sizing) - Auto-adapts with A11Y scale */
    --ds-button-height-sm-desktop: calc(2.25rem * var(--ds-density-multiplier));  /* 36px base → 42-48px for A11Y */
    --ds-button-height-md-desktop: var(--ds-touch-target);  /* 44px base → 48-64px for A11Y (WCAG AA default) */
    --ds-button-height-lg-desktop: calc(3rem * var(--ds-density-multiplier));     /* 48px base → 56-72px for A11Y */
    --ds-button-height-xl-desktop: calc(3.5rem * var(--ds-density-multiplier));   /* 56px base → 66-84px for A11Y */
    
    /* Padding */
    --ds-button-px-sm: var(--ds-space-3);   /* 12px */
    --ds-button-px-md: var(--ds-space-4);   /* 16px */
    --ds-button-px-lg: var(--ds-space-6);   /* 24px */
    
    /* Min width - 4px system */
    --ds-button-min-width-sm: 4rem;     /* 64px = 16 * 4px */
    --ds-button-min-width-md: 5.5rem;   /* 88px = 22 * 4px */
    --ds-button-min-width-lg: 7.5rem;   /* 120px = 30 * 4px */
    
    /* Font sizes */
    --ds-button-font-sm: 0.875rem;  /* 14px */
    --ds-button-font-md: 1rem;      /* 16px */
    --ds-button-font-lg: 1.125rem;  /* 18px */
    
    /* ==========================================
       PRIMARY BUTTON (Flat!)
       ========================================== */
    
    --ds-button-primary-bg: var(--ds-color-primary-bg);
    --ds-button-primary-bg-hover: var(--ds-color-primary-bg-hover);
    --ds-button-primary-bg-active: var(--ds-color-primary-bg-active);
    --ds-button-primary-text: var(--ds-color-primary-text);
    --ds-button-primary-border: transparent;
    
    /* ==========================================
       SECONDARY BUTTON (Outlined, Flat!)
       ========================================== */
    
    --ds-button-secondary-bg: var(--ds-color-secondary-bg);
    --ds-button-secondary-bg-hover: var(--ds-color-secondary-bg-hover);
    --ds-button-secondary-bg-active: var(--ds-color-secondary-bg-active);
    --ds-button-secondary-text: var(--ds-color-secondary-text);
    --ds-button-secondary-border: var(--ds-color-border-subtle);
    --ds-button-secondary-border-hover: var(--ds-color-border-strong);
    
    /* ==========================================
       GHOST BUTTON (Transparent, Flat!)
       ========================================== */
    
    --ds-button-ghost-bg: var(--ds-color-ghost-bg);
    --ds-button-ghost-bg-hover: var(--ds-color-ghost-bg-hover);
    --ds-button-ghost-bg-active: var(--ds-color-ghost-bg-active);
    --ds-button-ghost-text: var(--ds-color-ghost-text);
    --ds-button-ghost-border: transparent;
    --ds-button-ghost-border-hover: var(--ds-color-border-subtle);
    
    /* ==========================================
       STATE BUTTONS (Semantic, Flat!)
       Uses proper semantic tokens, NOT filter: brightness()!
       ========================================== */
    
    /* Danger/Destructive */
    --ds-button-danger-bg: var(--ds-color-state-danger);
    --ds-button-danger-bg-hover: color-mix(in oklab, var(--ds-color-state-danger), black 10%);
    --ds-button-danger-bg-active: color-mix(in oklab, var(--ds-color-state-danger), black 20%);
    --ds-button-danger-text: var(--ds-color-text-inverted);
    --ds-button-danger-border: transparent;
    
    /* Success */
    --ds-button-success-bg: var(--ds-color-state-success);
    --ds-button-success-bg-hover: color-mix(in oklab, var(--ds-color-state-success), black 10%);
    --ds-button-success-bg-active: color-mix(in oklab, var(--ds-color-state-success), black 20%);
    --ds-button-success-text: var(--ds-color-text-inverted);
    --ds-button-success-border: transparent;
    
    /* Warning */
    --ds-button-warning-bg: var(--ds-color-state-warning);
    --ds-button-warning-bg-hover: color-mix(in oklab, var(--ds-color-state-warning), black 10%);
    --ds-button-warning-bg-active: color-mix(in oklab, var(--ds-color-state-warning), black 20%);
    --ds-button-warning-text: var(--ds-color-text-primary);
    --ds-button-warning-border: transparent;
    
    /* Info */
    --ds-button-info-bg: var(--ds-color-state-info);
    --ds-button-info-bg-hover: color-mix(in oklab, var(--ds-color-state-info), black 10%);
    --ds-button-info-bg-active: color-mix(in oklab, var(--ds-color-state-info), black 20%);
    --ds-button-info-text: var(--ds-color-text-inverted);
    --ds-button-info-border: transparent;
    
    /* ==========================================
       LINK BUTTON (Text-only)
       ========================================== */
    
    --ds-button-link-bg: transparent;
    --ds-button-link-bg-hover: transparent;
    --ds-button-link-bg-active: transparent;
    --ds-button-link-text: var(--ds-color-text-link);
    --ds-button-link-text-hover: var(--ds-color-text-link-hover);
    --ds-button-link-border: transparent;
    
    /* ==========================================
       DISABLED STATE
       ========================================== */
    
    --ds-button-disabled-bg: var(--ds-color-surface-subtle);
    --ds-button-disabled-text: var(--ds-color-text-muted);
    --ds-button-disabled-border: var(--ds-color-border-subtle);
    --ds-button-disabled-opacity: 0.6;
    
    /* ==========================================
       FOCUS RING
       ========================================== */
    
    --ds-button-focus-ring: 0 0 0 2px var(--ds-color-surface-base), 0 0 0 4px var(--ds-color-primary-ring);
    
    /* ==========================================
       TRANSITIONS
       ========================================== */
    
    --ds-button-transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  /* ==========================================
     DARK MODE OVERRIDES
     ========================================== */
  
  :root[data-theme="dark"] {
    /* State buttons slightly lighter in dark mode for visibility */
    --ds-button-danger-bg-hover: color-mix(in oklab, var(--ds-color-state-danger), white 10%);
    --ds-button-danger-bg-active: color-mix(in oklab, var(--ds-color-state-danger), white 20%);
    
    --ds-button-success-bg-hover: color-mix(in oklab, var(--ds-color-state-success), white 10%);
    --ds-button-success-bg-active: color-mix(in oklab, var(--ds-color-state-success), white 20%);
    
    --ds-button-warning-bg-hover: color-mix(in oklab, var(--ds-color-state-warning), white 10%);
    --ds-button-warning-bg-active: color-mix(in oklab, var(--ds-color-state-warning), white 20%);
    
    --ds-button-info-bg-hover: color-mix(in oklab, var(--ds-color-state-info), white 10%);
    --ds-button-info-bg-active: color-mix(in oklab, var(--ds-color-state-info), white 20%);
  }
}

/* ==========================================
   BASE BUTTON STYLES - FLAT DESIGN
   ========================================== */

.ds-btn {
  /* Layout */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  align-self: center; /* Prevent parent grid/flex from stretching height */
  gap: var(--ds-space-2);
  
  /* Sizing (mobile-first) */
  min-height: var(--ds-button-height-md);
  min-width: var(--ds-button-min-width-md);
  padding: 0 var(--ds-button-px-md);
  
  /* Typography */
  font-family: var(--ds-font-body);
  font-size: var(--ds-button-font-md);
  font-weight: var(--ds-weight-semibold);
  line-height: 1;
  text-decoration: none;
  
  /* Visual - FLAT! */
  border-radius: var(--ds-radius-md);
  border: 1px solid transparent;
  background-color: var(--ds-button-primary-bg);
  color: var(--ds-button-primary-text);
  box-shadow: none; /* FLAT! */
  
  /* Interaction */
  cursor: pointer;
  transition: var(--ds-button-transition);
  user-select: none;
  
  /* Reset */
  appearance: none;
  outline: none;
  text-align: center;
  white-space: nowrap;
}

/* Hover - NO LIFT, NO SHADOW (Flat!) */
.ds-btn:hover {
  background-color: var(--ds-button-primary-bg-hover);
}

/* Active - NO TRANSFORM (Flat!) */
.ds-btn:active {
  background-color: var(--ds-button-primary-bg-active);
}

/* Focus - Ring only */
.ds-btn:focus-visible {
  box-shadow: var(--ds-button-focus-ring);
}

/* Disabled */
.ds-btn:disabled {
  background-color: var(--ds-button-disabled-bg);
  color: var(--ds-button-disabled-text);
  border-color: var(--ds-button-disabled-border);
  opacity: var(--ds-button-disabled-opacity);
  cursor: not-allowed;
}

/* Desktop: Smaller sizing */
@media (min-width: 768px) {
  .ds-btn {
    min-height: var(--ds-button-height-md-desktop);
  }
}

/* ==========================================
   SIZE VARIANTS
   ========================================== */

.ds-btn--sm {
  min-height: var(--ds-button-height-sm);
  min-width: var(--ds-button-min-width-sm);
  padding: 0 var(--ds-button-px-sm);
  font-size: var(--ds-button-font-sm);
}

@media (min-width: 768px) {
  .ds-btn--sm {
    min-height: var(--ds-button-height-sm-desktop);
  }
}

.ds-btn--lg {
  min-height: var(--ds-button-height-lg);
  min-width: var(--ds-button-min-width-lg);
  padding: 0 var(--ds-button-px-lg);
  font-size: var(--ds-button-font-lg);
}

@media (min-width: 768px) {
  .ds-btn--lg {
    min-height: var(--ds-button-height-lg-desktop);
  }
}

.ds-btn--xl {
  min-height: var(--ds-button-height-xl);
  min-width: var(--ds-button-min-width-lg); /* Reuse lg min-width */
  padding: 0 var(--ds-button-px-lg);        /* Reuse lg padding */
  font-size: calc(var(--ds-button-font-lg) * 1.125); /* 20.25px */
}

@media (min-width: 768px) {
  .ds-btn--xl {
    min-height: var(--ds-button-height-xl-desktop);
  }
}

/* Full width */
.ds-btn--full {
  width: 100%;
}

/* Icon only (square) */
.ds-btn--icon {
  min-width: var(--ds-button-height-md);
  padding: 0;
}

.ds-btn--icon.ds-btn--sm {
  min-width: var(--ds-button-height-sm);
}

.ds-btn--icon.ds-btn--lg {
  min-width: var(--ds-button-height-lg);
}

.ds-btn--icon.ds-btn--xl {
  min-width: var(--ds-button-height-xl);
}

/* ==========================================
   VARIANT STYLES - ALL FLAT!
   ========================================== */

/* Secondary (Outlined) */
.ds-btn--secondary {
  background-color: var(--ds-button-secondary-bg);
  color: var(--ds-button-secondary-text);
  border-color: var(--ds-button-secondary-border);
}

.ds-btn--secondary:hover {
  background-color: var(--ds-button-secondary-bg-hover);
  border-color: var(--ds-button-secondary-border-hover);
}

.ds-btn--secondary:active {
  background-color: var(--ds-button-secondary-bg-active);
}

/* Ghost (Minimal) */
.ds-btn--ghost {
  background-color: var(--ds-button-ghost-bg);
  color: var(--ds-button-ghost-text);
  border-color: var(--ds-button-ghost-border);
}

.ds-btn--ghost:hover {
  background-color: var(--ds-button-ghost-bg-hover);
  border-color: var(--ds-button-ghost-border-hover);
}

.ds-btn--ghost:active {
  background-color: var(--ds-button-ghost-bg-active);
}

/* Danger (Destructive) */
.ds-btn--danger {
  background-color: var(--ds-button-danger-bg);
  color: var(--ds-button-danger-text);
  border-color: var(--ds-button-danger-border);
}

.ds-btn--danger:hover {
  background-color: var(--ds-button-danger-bg-hover);
}

.ds-btn--danger:active {
  background-color: var(--ds-button-danger-bg-active);
}

/* Success */
.ds-btn--success {
  background-color: var(--ds-button-success-bg);
  color: var(--ds-button-success-text);
  border-color: var(--ds-button-success-border);
}

.ds-btn--success:hover {
  background-color: var(--ds-button-success-bg-hover);
}

.ds-btn--success:active {
  background-color: var(--ds-button-success-bg-active);
}

/* Warning */
.ds-btn--warning {
  background-color: var(--ds-button-warning-bg);
  color: var(--ds-button-warning-text);
  border-color: var(--ds-button-warning-border);
}

.ds-btn--warning:hover {
  background-color: var(--ds-button-warning-bg-hover);
}

.ds-btn--warning:active {
  background-color: var(--ds-button-warning-bg-active);
}

/* Info */
.ds-btn--info {
  background-color: var(--ds-button-info-bg);
  color: var(--ds-button-info-text);
  border-color: var(--ds-button-info-border);
}

.ds-btn--info:hover {
  background-color: var(--ds-button-info-bg-hover);
}

.ds-btn--info:active {
  background-color: var(--ds-button-info-bg-active);
}

/* Link (Text-only) */
.ds-btn--link {
  background-color: var(--ds-button-link-bg);
  color: var(--ds-button-link-text);
  border-color: var(--ds-button-link-border);
  min-width: auto;
  text-decoration: underline;
  text-underline-offset: 2px;
}

.ds-btn--link:hover {
  background-color: var(--ds-button-link-bg-hover);
  color: var(--ds-button-link-text-hover);
}

.ds-btn--link:active {
  background-color: var(--ds-button-link-bg-active);
}

.ds-btn--link:focus-visible {
  box-shadow: 0 0 0 2px var(--ds-color-primary-ring);
}
